<section id="home">
    <div class="carousel">
        <div class="container default">
            <owl-carousel-o [options]="customOptions" class="testimonials-carousel">
                <ng-container *ngFor="let user of users" >
                    <ng-template carouselSlide [id]="user.id">
                        <div class="carousel-block" [routerLink]="['/testimonial', user.testimonial._id]">
                            <div class="content">
                                <div class="user-testimonial">
                                    <p>
                                        {{ user.testimonial.text | summary }}
                                    </p>
                                </div>
                                <div class="user-info">
                                    <h5 class="font-weight-bold">{{ user.firstName }} {{ user.lastName }}</h5>
                                    <h6>{{ user.testimonial.city }}, {{ user.testimonial.state }}</h6>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </ng-container>
            </owl-carousel-o>
        </div>
    </div>

    <div class="cta">
        <div class="container default">
            <div class="help-needy text-center">
                <p>Lorem ipsum dolor sit amet, nsectetur adipiscing sce vehiculsectetuLorem ipsum dolor sit amet, cLorem ipsum dolor sit a</p>
                <button routerLink="/help" class="btn btn-light">Eu tenho uma dor!</button>
            </div>
        </div>
    </div>

    <div class="testimonials" #testimonials>
        <div class="container default">
            <div class="filterByText">Filtrar por:</div>
            <ul class="list-filter list-group list-group-horizontal" >
                <li class="list-group-item" [ngClass]="{'active': filterActive === 'Data' }" (click)="filterByStates($event, testimonials)">Data</li>
                <li class="list-group-item" [ngClass]="{'active': filterActive === 'Mais vistos' }" (click)="filterByInterests($event)">Mais vistos</li>
                <li class="list-group-item" [ngClass]="{'active': filterActive === 'Estado' }" (click)="filterByStates($event, testimonials)">Estado</li>
            </ul>

            <div >
                <div 
                    *ngFor="let user of users; let i=index" 
                    [ngClass]="{'active': testimonialEvent === i }" 
                    (click)="goToTestimonial(i)"
                    class="needy-testimonial" >
                    <div>
                        <div class="info">
                            <h5>{{ user.firstName }} {{ user.lastName }}</h5><small>compartilhou:</small>
                            
                        </div>
                        <div class="text">
                            <p>{{ user.testimonial.text }}</p>
                            <h6>{{ user.testimonial.city }}, {{ user.testimonial.state }}</h6>
                            <div class="text-center pb-3 py-3">
                                <interested-button [testimonialId]="user.testimonial._id" [count]="user.testimonial.interests"></interested-button>
                            </div>
                        </div>
                    </div>
                </div> 
            </div>
            
        </div>
    </div>
</section>